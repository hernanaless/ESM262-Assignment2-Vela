knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(tidyr)
library(tidyverse)
library(tidyverse)
library(readr)
library(tibble)
library(plyr)
Raw_CA_Gazetteer_Dataset <- read_delim("~/Documents/Bren School Documents/3-Spring Quarter 2018/ESM262-Computing for Environmental Sciences/Assignment2/CA_Features_20180401.txt",
"|", escape_double = FALSE, trim_ws = TRUE)
View(Raw_CA_Gazetteer_Dataset)
CA_Gazetteer_NewColumns <- Raw_CA_Gazetteer_Dataset
names(CA_Gazetteer_NewColumns) <- c("ID", "Name", "Class", "State", "State_ID", "County", "County_ID", "Latitude_DMS", "Longitude_DMS", "Latitude_DEC", "Longitude_DEC", "Latitude_DMS_SRC", "Longitude_DMS_SRC", "Latitude_DEC_SRC", "Longitude_DEC_SRC", "Elevation_MTS", "Elevation_FT", "MapName", "DateCreated", "DateEdited")
View(CA_Gazetteer_NewColumns)
CA_Gazetter_SelectedColumns <- select(CA_Gazetteer_NewColumns, ID, Name, Class, State, County, Latitude_DEC, Longitude_DEC, Latitude_DEC_SRC, Longitude_DEC_SRC, Elevation_MTS, MapName, DateCreated, DateEdited)
View(CA_Gazetter_SelectedColumns)
str(CA_Gazetter_SelectedColumns)
CA_Gazetter_SelectedColumns$DateCreated <- as.Date(CA_Gazetter_SelectedColumns$DateCreated, format = "%m/%d/%Y")
CA_Gazetter_SelectedColumns$DateEdited <- as.Date(CA_Gazetter_SelectedColumns$DateEdited, format = "%m/%d/%Y")
str(CA_Gazetter_SelectedColumns)
View(CA_Gazetter_SelectedColumns)
CA_Gazetteer_CAOnly <- CA_Gazetter_SelectedColumns %>%
filter(State == "CA") %>%
filter(Latitude_DEC != "") %>%
filter(Longitude_DEC != "")
View(CA_Gazetteer_CAOnly)
install.packages("RMySQL")
library(DBI)
install.packages("dbplyr")
CA_Gazetter_DB <- DBI::dbConnect(RSQLite::SQLite(), path ="gaz.db")
library(dplyr)
CA_Gazetter_DB <- DBI::dbConnect(RSQLite::SQLite(), path ="gaz.db")
install.packages("dbplyr")
library(dplyr)
CA_Gazetter_DB <- DBI::dbConnect(RSQLite::SQLite(), path ="gaz.db")
library(DBI)
CA_Gazetter_DB <- DBI::dbConnect(RSQLite::SQLite(), path ="gaz.db")
library(tidyverse)
library(RSQLite)
install.packages("RSQLite")
install.packages("RSQLite")
install.packages("dbplyr")
library(dplyr)
library(DBI)
CA_Gazetter_DB <- DBI::dbConnect(RSQLite::SQLite(), path ="gaz.db")
library(dplyr)
library(DBI)
CA_Gazetter_DB <- DBI::dbConnect(RSQLite::SQLite(), path ="gaz.db")
getwd()
copy_to(CA_Gazetter_DB, CA_Gazetteer_CAOnly, "Gaz",
temporary = FALSE
)
dbGetQuery(CA_Gazetter_DB, "SELECT * FROM Gaz LIMIT 10")
dbDisconnect(CA_Gazetter_DB)
getwd()
?dbConnect
?copy_to
CA_Gazetteer_CAOnly <- CA_Gazetter_SelectedColumns %>%
filter(State == "CA") %>%
filter(Latitude_DEC != "") %>%
filter(Longitude_DEC != "")
View(CA_Gazetteer_CAOnly)
library(dplyr)
library(DBI)
CA_Gazetter_DB <- DBI::dbConnect(RSQLite::SQLite(), path ="gaz.db")
copy_to(CA_Gazetter_DB, CA_Gazetteer_CAOnly, "Gaz",
temporary = FALSE
)
dbGetQuery(CA_Gazetter_DB, "SELECT * FROM Gaz LIMIT 10")
dbGetQuery(CA_Gazetter_DB, "SELECT COUNT(*) FROM Gaz")
query <- "
SELECT *
FROM Gaz
LIMIT 10
"
dbGetQuery(CA_Gazetter_DB, query)
knitr::opts_chunk$set(echo = TRUE)
CA_Gazetter_DB <- DBI::dbConnect(RSQLite::SQLite(), path ="gaz.db")
copy_to(CA_Gazetter_DB, CA_Gazetteer_CAOnly, "Gaz",
temporary = FALSE
)
knitr::opts_chunk$set(echo = TRUE)
library(plyr)
library(tidyverse)
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(DBI)
Raw_CA_Gazetteer_Dataset <- read_delim("~/Documents/Bren School Documents/3-Spring Quarter 2018/ESM262-Computing for Environmental Sciences/Assignment2/CA_Features_20180401.txt",
"|", escape_double = FALSE, trim_ws = TRUE)
View(Raw_CA_Gazetteer_Dataset)
CA_Gazetteer_NewColumns <- Raw_CA_Gazetteer_Dataset
names(CA_Gazetteer_NewColumns) <- c("ID", "Name", "Class", "State", "State_ID", "County", "County_ID", "Latitude_DMS", "Longitude_DMS", "Latitude_DEC", "Longitude_DEC", "Latitude_DMS_SRC", "Longitude_DMS_SRC", "Latitude_DEC_SRC", "Longitude_DEC_SRC", "Elevation_MTS", "Elevation_FT", "MapName", "DateCreated", "DateEdited")
View(CA_Gazetteer_NewColumns)
CA_Gazetter_SelectedColumns <- select(CA_Gazetteer_NewColumns, ID, Name, Class, State, County, Latitude_DEC, Longitude_DEC, Latitude_DEC_SRC, Longitude_DEC_SRC, Elevation_MTS, MapName, DateCreated, DateEdited)
View(CA_Gazetter_SelectedColumns)
#The only columns needed to change types was the dates, so I proceeded to change both dates columns.
str(CA_Gazetter_SelectedColumns)
CA_Gazetter_SelectedColumns$DateCreated <- as.Date(CA_Gazetter_SelectedColumns$DateCreated, format = "%m/%d/%Y")
CA_Gazetter_SelectedColumns$DateEdited <- as.Date(CA_Gazetter_SelectedColumns$DateEdited, format = "%m/%d/%Y")
str(CA_Gazetter_SelectedColumns)
View(CA_Gazetter_SelectedColumns)
CA_Gazetteer_CAOnly <- CA_Gazetter_SelectedColumns %>%
filter(State == "CA") %>%
filter(Latitude_DEC != "") %>%
filter(Longitude_DEC != "")
View(CA_Gazetteer_CAOnly)
getwd()
library(dplyr)
library(DBI)
CA_Gazetter_DB <- DBI::dbConnect(RSQLite::SQLite(), path ="gaz.db")
copy_to(CA_Gazetter_DB, CA_Gazetteer_CAOnly, "Gaz",
temporary = FALSE
)
query <- "
SELECT *
FROM Gaz
LIMIT 10
"
dbGetQuery(CA_Gazetter_DB, query)
query <- "
SELECT *
FROM Gaz
LIMIT 10
"
dbGetQuery(CA_Gazetter_DB, query)
dbDisconnect(CA_Gazetter_DB)
CA_Gazetter_DB <- DBI::dbConnect(RSQLite::SQLite(), path ="gaz.db")
copy_to(CA_Gazetter_DB, CA_Gazetteer_CAOnly, "Gaz",
temporary = FALSE
)
"
LIMIT 10
dbGetQuery(CA_Gazetter_DB, query)
"
dbGetQuery(CA_Gazetter_DB, query)
dbDisconnect(CA_Gazetter_DB)
install.packages(sqldf)
install.packages("sqldf")
knitr::opts_chunk$set(echo = TRUE)
library(plyr)
library(tidyverse)
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(DBI)
library(sqldf)
# Import the data we want to store in the SQL database
data = read.csv("Gazetteer.csv", sep="|")
# Connect to our database
db<- dbConnect(SQLite(), dbname="gaz.db")
# Write the data to our database
dbWriteTable(db, "data", data)
# Query our database to display us the highest count of feature Name
dbGetQuery(db, 'SELECT Name FROM data GROUP BY Name ORDER BY COUNT(*) DESC LIMIT 1')
# Query our database to display us the lowest count of feature Class
dbGetQuery(db, 'SELECT Class FROM data GROUP BY Class ORDER BY COUNT(*) ASC LIMIT 1')
# Display center of each county
dbGetQuery(db, 'SELECT County, AVG(Latitude_DEC) AS
"Approximate Center Latitude", AVG(Longitude_DEC) AS
"Approximate Center Longitude" FROM data GROUP BY County')
feature.Feature FROM data LEFT JOIN feature ON data.Class = feature.Class")[,3]
# Import feature class from previous exercises and join it to our db and store the values of Man/Nature in variable feature
feature<-read.table("feature.txt", header = TRUE)
dbWriteTable(db, "feature", feature)
features<-dbGetQuery(db, "SELECT County, data.Class,
feature.Feature FROM data LEFT JOIN feature ON data.Class = feature.Class")[,3]
feature.Feature FROM data LEFT JOIN feature ON data.Class = feature.Class")[,3]
feature<-read.table("feature.txt", header = TRUE)
dbWriteTable(db, "feature", feature)
# Import feature class from previous exercises and join it to our db and store the values of Man/Nature in variable feature
feature<-read.table("feature.txt", header = TRUE)
dbWriteTable(db, "feature", feature)
features<-dbGetQuery(db, "SELECT County, data.Class,
feature.Feature FROM data LEFT JOIN feature ON data.Class = feature.Class")[,3]
features
# Display count of natural and man made features respectively
table(unlist(features))
# Display total number of natural and man made features
length(features)
# Display count of natural and man made features respectively
table(unlist(features))
knitr::opts_chunk$set(echo = TRUE)
library(plyr)
library(tidyverse)
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(DBI)
library(sqldf)
# Import the data we want to store in the SQL database
data = read.csv("Gazetteer.csv", sep="|")
# Connect to our database
db<- dbConnect(SQLite(), dbname="gaz.db")
# Write the data to our database
dbWriteTable(db, "data", data)
